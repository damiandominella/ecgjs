var EcgJs=function(a){'use strict';var b="undefined"==typeof globalThis?"undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?{}:self:global:window:globalThis,c=function(a,b){return b={exports:{}},a(b,b.exports),b.exports}(function(a,c){var d=b&&b.__assign||function(){return d=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a},d.apply(this,arguments)};c.__esModule=!0;var e=function(){function a(a,b,c,e,f){void 0===e&&(e={}),void 0===f&&(f={}),this.X_MIN=0,this.X_MAX=4e3,this.Y_MIN=1.12,this.Y_MAX=1.17,console.log("[ecgjs] INIT"),this.$plotly=b,this.elementId=a,this.element=document.getElementById(a),c?(!c.x&&(this.data.x=[]),!c.y&&(this.data.y=[])):this.data={x:[],y:[]},this.setDefaults(),this.config=d(d({},this.config),e),this.layout=d(d({},this.layout),f),this.index=0,this.originalSpeed=1,this.speed=this.originalSpeed,this.isPlaying=!1,this.annotations=[]}return a.prototype.plot=function(){console.log("[ecgjs] PLOT"),this.$plotly.newPlot(this.elementId,[{x:this.data.x,y:this.data.y,name:"Ecg",mode:"scatter"}],this.layout,this.config)},a.prototype.reset=function(){console.log("[ecgjs] RESET"),this.pause(),this.setDefaults(),this.$plotly.purge(this.elementId),this.index=0,this.plot()},a.prototype.clearNotes=function(){console.log("[ecgjs] CLEAR_NOTES"),this.annotations=[],this.$plotly.relayout(this.elementId,{annotations:[]})},a.prototype.addNote=function(a,b){var c={text:a,x:b.points[0].x,y:parseFloat(b.points[0].y.toPrecision(4)),font:{size:14,color:"#333"},ax:20,ay:-30,borderpad:2,bgcolor:"#FFEC8B",opacity:.9};this.annotations=this.layout.annotations||[],this.annotations.push(c),this.$plotly.relayout(this.elementId,{annotations:this.annotations})},a.prototype.setData=function(a){console.log("[ecgjs] SET_DATA"),this.data=a,this.$plotly.update(this.elementId,{x:[this.data.x],y:[this.data.y]},{},[0])},a.prototype.addData=function(a){console.log("[ecgjs] ADD_DATA"),this.data.x=this.data.x.concat(a.x),this.data.y=this.data.y.concat(a.y),this.$plotly.extendTraces(this.elementId,{x:[a.x],y:[a.y]},[0])},a.prototype.play=function(){var a=this;this.isPlaying||(console.log("[ecgjs] PLAY"),this.isPlaying=!0,this.interval=setInterval(function(){a.xRange=a.xRange.map(function(b){return b+10*a.speed}),a.updateRange()},25))},a.prototype.pause=function(){this.isPlaying&&(console.log("[ecgjs] PAUSE"),!!this.interval&&(this.isPlaying=!1,clearInterval(this.interval)))},a.prototype.changeSpeed=function(a){console.log("[ecgjs] CHANGE_SPEED"),this.speed=this.originalSpeed*a},a.prototype.updateRange=function(a,b){console.log("[ecgjs] UPDATE_RANGE"),!a||(this.xRange=a),!b||(this.yRange=b),this.$plotly.relayout(this.elementId,{"xaxis.range":this.xRange,"yaxis.range":this.yRange})},a.prototype.setDefaults=function(){this.setDefaultRanges(),this.layout={title:"EcgJs",height:500,colorway:["#000","#777"],annotations:this.annotations,xaxis:{title:"Time (ms)",range:this.xRange,fixedrange:!1,showline:!0,showgrid:!0,gridcolor:"#ff0202",tickmode:"linear",dtick:200},yaxis:{title:"Amplitude (mV)",range:this.yRange,fixedrange:!1,showline:!0,showgrid:!0,gridcolor:"#ff0202",tickmode:"linear",dtick:.005}},this.config={responsive:!0,scrollZoom:!1,displayModeBar:!0,showlegend:!1,modeBarButtonsToRemove:["autoScale2d"]}},a.prototype.setDefaultRanges=function(){this.xRange=[this.X_MIN,this.X_MAX],this.yRange=[this.Y_MIN,this.Y_MAX]},a}();c.init=function(a,b){var c=new e(a,b.plotly,b.data,b.config,b.layout);return c.plot(),c}}),d=function(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a["default"]:a}(c),e=c.init;return a.default=d,a.init=e,a}({});
//# sourceMappingURL=ecg.min.js.map
